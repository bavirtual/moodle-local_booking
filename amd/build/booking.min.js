define ("local_booking/booking",["jquery","core/templates","core/notification","local_booking/repository","local_booking/view_manager","local_booking/selectors"],function(a,b,c,d,e,f){var g={ROOT:"[data-region='calendar']",DAY:"[data-region='day']",CANCEL_BUTTON:"[data-region='cancel-button']",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]",NEW_EVENT_BUTTON:"[data-action='new-event-button']",BOOKING:"[data-region='booking-data']",LOADING_ICON:".loading-icon",BOOKING_WRAPPER:".bookingwrapper",TODAY:".today"},h=function(a){a.on("click",g.CANCEL_BUTTON,function(){e.startLoading(a);var b=a.find(g.BOOKING_WRAPPER).data("categoryid"),f=a.find(g.BOOKING_WRAPPER).data("courseid"),h=a.find(g.BOOKING).data("bookingid");alert("cancelling booking::"+h);return d.cancelBooking(f,h).then(function(a){if(a.validationerror){alert("Errors encountered: Unable to cancel booking!")}}.bind(this)).always(function(){c.fetchNotifications();e.stopLoading(a);return e.refreshBookingsContent(a,f,b)}.bind(this)).fail(c.exception)});var b=a.find(f.containers.loadingIcon);b.addClass("hidden")};return{init:function init(b){b=a(b);h(b)}}});
//# sourceMappingURL=booking.min.js.map

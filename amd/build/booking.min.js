define ("local_booking/booking",["jquery","core/templates","core/notification","local_booking/repository","local_booking/view_manager","local_booking/selectors"],function(a,b,c,d,f,g){var h={CANCEL_BUTTON:"[data-region='cancel-button']",LOADING_ICON_CONTAINER:"[data-region=\"loading-icon-container\"]",BOOKING:"[data-region='booking-info']",LOADING_ICON:".loading-icon",BOOKING_WRAPPER:".bookingwrapper"},i=function(a){a.on("click",h.CANCEL_BUTTON,function(b){f.startLoading(a);var e=b.target,g=a.find(h.BOOKING_WRAPPER).data("categoryid"),i=a.find(h.BOOKING_WRAPPER).data("courseid"),j=e.dataset.booking;return d.cancelBooking(i,j).then(function(a){if(a.validationerror){alert("Errors encountered: Unable to cancel booking!")}}.bind(this)).always(function(){c.fetchNotifications();f.stopLoading(a);alert("cancelling booking::"+j);return f.refreshBookingsContent(a,i,g)}.bind(this)).fail(c.exception)});var b=a.find(g.containers.loadingIcon);b.addClass("hidden")};return{init:function init(b){b=a(b);i(b)}}});
//# sourceMappingURL=booking.min.js.map

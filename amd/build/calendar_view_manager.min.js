function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_booking/calendar_view_manager",["exports","jquery","core/templates","core/notification","core/custom_interaction_events","local_booking/slot_actions","local_booking/repository","local_booking/selectors"],function(a,b,c,d,e,f,g,h){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=a.stopLoading=a.startLoading=a.reloadCurrentMonth=a.changeWeek=a.refreshWeekContent=void 0;b=k(b);c=k(c);d=k(d);e=k(e);f=k(f);g=j(g);h=j(h);function i(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;i=function(){return a};return a}function j(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=i();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;if(f&&(f.get||f.set)){Object.defineProperty(c,e,f)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}function k(a){return a&&a.__esModule?a:{default:a}}var l=function(a){a=(0,b.default)(a);a.on("click",h.links.navLink,function(b){var c=a.find(h.calendarwrapper),d=c.data("courseid"),e=c.data("categoryid"),f=b.currentTarget;n(a,f.href,f.dataset.year,f.dataset.week,f.dataset.time,d,e);b.preventDefault()});var c=a.find(h.viewSelector);e.default.define(c,[e.default.events.activate]);c.on(e.default.events.activate,function(b){b.preventDefault();var c=b.target;if(c.classList.contains("active")){return}var e=c.dataset.year,f=c.dataset.week,g=c.dataset.time,h=c.dataset.courseid,i=c.dataset.categoryid;m(a,e,f,g,h,i,b.target,"local_booking/calendar_week").then(function(){return window.history.pushState({},"","?view=user")}).fail(d.default.exception)})},m=function(a,b,e,i,j,k){var l=6<arguments.length&&arguments[6]!==void 0?arguments[6]:null,m=7<arguments.length&&arguments[7]!==void 0?arguments[7]:"";p(a);l=l||a.find(h.calendarwrapper);m=m||a.attr("data-template");M.util.js_pending([a.get("id"),b,e,j].join("-"));var n=l.data("action"),o=l.data("viewall")?"all":"user",r=l.data("student-id"),s=l.data("exercise-id");i=0==i?Date.now()/1e3:i;return g.getCalendarWeekData(b,e,i,j,k,n,o,r,s).then(function(a){a.viewingmonth=!0;return c.default.render(m,a)}).then(function(a,b){return c.default.replaceNode(l,a,b)}).always(function(){M.util.js_complete([a.get("id"),b,e,j].join("-"));f.default.setPasteState(a);f.default.setSaveButtonState(a,n);return q(a)}).fail(d.default.exception)};a.refreshWeekContent=m;var n=function(a,b,c,d,e,f,g){return m(a,c,d,e,f,g,null,"").then(function(){if(b.length&&"#"!==b){window.history.pushState({},"",b)}for(var a=arguments.length,c=Array(a),d=0;d<a;d++){c[d]=arguments[d]}return c})};a.changeWeek=n;var o=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,d=a.find(h.calendarwrapper).data("year"),e=a.find(h.calendarwrapper).data("week"),f=a.find(h.calendarwrapper).data("time");b=b||a.find(h.calendarwrapper).data("courseid");c=c||a.find(h.calendarwrapper).data("categoryid");return m(a,d,e,f,b,c,null,"")};a.reloadCurrentMonth=o;var p=function(a){var c=a.find(h.containers.loadingIcon);c.removeClass("hidden");(0,b.default)(a).one("submit",function(){(0,b.default)(this).find("input[type=\"submit\"]").attr("disabled","disabled")})};a.startLoading=p;var q=function(a){var c=a.find(h.containers.loadingIcon);c.addClass("hidden");(0,b.default)(a).one("submit",function(){(0,b.default)(this).find("input[type=\"submit\"]").attr("enabled","enabled")})};a.stopLoading=q;a.init=function init(a,b){l(a,b)}});
//# sourceMappingURL=calendar_view_manager.min.js.map

define ("local_booking/booking",["jquery","local_booking/view_manager","local_booking/logbook_actions","local_booking/events","local_booking/selectors"],function(a,b,c,d,e){var f={PROGRESSION_WRAPPER:".progressionwrapper",CANCEL_BUTTON:"[data-region='cancel-button']",SESSION_ENTRY:"[data-region='session-entry']"},g=function(e,f){var g=a("body");g.on(d.created,function(){b.reloadCurrentMonth(e)});g.on(d.updated,function(){b.reloadCurrentMonth(e)});c.registerEditListeners(e,f)},h=function(d){var h=c.registerLogentryFormModal(d),i=a(f.PROGRESSION_WRAPPER).data("context-id");g(d,h);if(i){d.on("click",f.SESSION_ENTRY,function(b){var c=a(b.target),d=a(this).attr("data-session-date"),f=a(this).attr("data-student-id");h.then(function(a){var b=c.closest(e.progressionwrapper);a.setCourseId(b.data("courseid"));var g=b.data("exerciseid");if("undefined"!=typeof g){a.setExerciseId(g)}a.setContextId(b.data("context-id"));a.setStudentId(f);a.setSessionDate(d);a.show()}).fail(Notification.exception);b.preventDefault()})}d.on("click",f.CANCEL_BUTTON,function(a){if(confirm("Cancel booked session?")){b.cancelBooking(d,a)}})};return{init:function init(b){b=a(b);h(b)}}});
//# sourceMappingURL=booking.min.js.map

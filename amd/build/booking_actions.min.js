/**
 * This module handles session booking and logentry operations
 * including CRUD and UI events.
 *
 * @module     local_booking/booking_actions
 * @author     Mustafa Hajjar (mustafahajjar@gmail.com)
 * @copyright  BAVirtual.co.uk Â© 2021
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_booking/booking_actions",["jquery","core/str","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_factory","core/modal_events","core/pending","local_booking/modal_logentry_form","local_booking/repository","local_booking/events","local_booking/modal_delete","local_booking/selectors","local_booking/booking_view_manager"],(function($,Str,Notification,CustomEvents,Modal,ModalRegistry,ModalFactory,ModalEvents,Pending,ModalLogentryForm,Repository,BookingSessions,ModalDelete,BookingSelectors,ViewManager){return{gotoFeedback:function(root){var courseId,exerciseId,userId,LogentrySource=root.find(BookingSelectors.logentryitem);courseId=LogentrySource.data("courseId"),exerciseId=LogentrySource.data("exerciseId"),userId=LogentrySource.data("userId"),$("body").trigger(BookingSessions.gotoFeedback,[exerciseId]),location.href=M.cfg.wwwroot+"/local/booking/assign.php?courseid="+courseId+"&exeid="+exerciseId+"&rownum=0&userid="+userId+"&passed=1"},cancelBooking:function(root,e,comment,noshow){ViewManager.startLoading(root);var bookingId=e.target.dataset.bookingid;return Repository.cancelBooking(bookingId,comment,noshow).then((function(response){response.validationerror&&alert(Str.get_string("errorlogentrycancel","local_booking"))})).always((function(){$("body").trigger(BookingSessions.canceled,[root,!1]),Notification.fetchNotifications(),ViewManager.stopLoading(root)})).fail(Notification.exception)}}}));

//# sourceMappingURL=booking_actions.min.js.map
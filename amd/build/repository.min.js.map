{"version":3,"sources":["../src/repository.js"],"names":["getBookingsData","courseId","Ajax","call","methodname","args","courseid","cancelBooking","bookingId","comment","bookingid","saveSlots","weekSlots","course","year","week","slots","saveBookedSlot","bookedslot","exerciseId","studentId","exerciseid","studentid","clearSlots","submitCreateUpdateForm","formArgs","formData","formargs","formdata","getCalendarWeekData","time","categoryId","action","view","categoryid","getLogentryById","logentryId","logentryid"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * A javascript module to handle calendar ajax actions.\n * Improvised from core_calendar.\n *\n * @module     local_booking/repository\n * @author     Mustafa Hajjar (mustafahajjar@gmail.com)\n * @copyright  BAVirtual.co.uk Â© 2021\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Ajax from 'core/ajax';\n\n/**\n * Get sesison booking, my bookings, and my students data to view.\n *\n * @method getBookingsData\n * @param {number} courseId The course id.\n * @param {number} categoryId The category id.\n * @return {promise} Resolved with the month view data.\n */\n export const getBookingsData = (courseId) => {\n    const request = {\n        methodname: 'local_booking_get_bookings_view',\n        args: {\n            courseid: courseId,\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Cancel a sepcific booking for a student.\n *\n * @param {int} bookingId   The booking id to cancel\n * @param {string} comment  The booking id to cancel\n * @return {promise}\n */\n export const cancelBooking = (bookingId, comment) => {\n    const request = {\n        methodname: 'local_booking_cancel_booking',\n        args: {\n            bookingid: bookingId,\n            comment: comment,\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Change the start day for the given event id. The day timestamp\n * only has to be any time during the target day because only the\n * date information is extracted, the time of the day is ignored.\n *\n * @param {string} weekSlots The URL encoded values from the form\n * @param {int} course The id of the associated course\n * @param {int} year The id of the event to update\n * @param {int} week A timestamp for some time during the target day\n * @return {promise}\n */\n export const saveSlots = (weekSlots, course, year, week) => {\n    const request = {\n        methodname: 'local_booking_save_slots',\n        args: {\n            slots: weekSlots,\n            courseid: course,\n            year: year,\n            week: week\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Change the start day for the given event id. The day timestamp\n * only has to be any time during the target day because only the\n * date information is extracted, the time of the day is ignored.\n *\n * @param {array} bookedslot    The array of booked slots\n * @param {int} courseId        The course id of the booking\n * @param {int} exerciseId      The exercise id of the associated course\n * @param {int} studentId       The id of the associated user\n * @param {int} slotId          The id of the slot if exists != 0\n * @return {promise}\n */\n export const saveBookedSlot = (bookedslot, courseId, exerciseId, studentId) => {\n    const request = {\n        methodname: 'local_booking_save',\n        args: {\n            bookedslot: bookedslot,\n            courseid: courseId,\n            exerciseid: exerciseId,\n            studentid: studentId,\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Change the start day for the given event id. The day timestamp\n * only has to be any time during the target day because only the\n * date information is extracted, the time of the day is ignored.\n *\n * @param {int} course The id of the associated course\n * @param {int} year The id of the event to update\n * @param {int} week A timestamp for some time during the target day\n * @return {promise}\n */\n export const clearSlots = (course, year, week) => {\n    const request = {\n        methodname: 'local_booking_delete_slots',\n        args: {\n            courseid: course,\n            year: year,\n            week: week\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Submit the form data for the logbook entry form.\n *\n * @method submitCreateUpdateForm\n * @param {string} formArgs An array of J URL encoded values from the form\n * @param {string} formData The URL encoded values from the form\n * @return {promise} Resolved with the new or edited logbook entry\n */\n export const submitCreateUpdateForm = (formArgs, formData) => {\n    const request = {\n        methodname: 'local_booking_submit_create_update_form',\n        args: {\n            formargs: formArgs,\n            formdata: formData\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Get calendar data for the month view.\n *\n * @method getCalendarWeekData\n * @param {number} year Year\n * @param {number} week Week\n * @param {number} time Timestamp\n * @param {number} courseId The course id.\n * @param {number} categoryId The category id.\n * @param {string} action The action type.\n * @param {string} view The view type user/all.\n * @param {number} studentId The id of the associated user.\n * @param {number} exerciseId The exercise id for the booked session.\n * @return {promise} Resolved with the month view data.\n */\nexport const getCalendarWeekData = (year, week, time, courseId, categoryId, action, view, studentId, exerciseId) => {\n    const request = {\n        methodname: 'local_booking_get_weekly_view',\n        args: {\n            year,\n            week,\n            time,\n            courseid: courseId,\n            categoryid: categoryId,\n            action: action,\n            view: view,\n            studentid: studentId,\n            exerciseid: exerciseId,\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n\n/**\n * Get a graded session logbook entry by id.\n *\n * @method getLogentryById\n * @param {number} logentryId The logbook entry id.\n * @param {number} courseId The associated course id.\n * @param {number} studentId The student id of entry.\n * @return {promise} Resolved with requested calendar event\n */\n export const getLogentryById = (logentryId, courseId, studentId) => {\n\n    const request = {\n        methodname: 'local_booking_get_logentry_by_id',\n        args: {\n            logentryid: logentryId,\n            courseid: courseId,\n            studentid: studentId\n        }\n    };\n\n    return Ajax.call([request])[0];\n};\n"],"file":"repository.min.js"}
define ("local_booking/user_profile",["jquery","core/str","core/notification","local_booking/repository","local_booking/selectors"],function(a,b,c,d,e){var f=function(d,f,h,i){var j=i.find(e.userprofilewrapper),k=j.data("endorser"),l=new Date().toDateString(),m=h?"endorsementmgs":"skilltestendorse",n=b.get_string(m,"local_booking",{endorser:k,endorsedate:l});n.then(function(b){a("#endorsement-label").html(b);return b}.bind(this)).fail(c.exception);g("endorse",h,d,f,"endorse");g("endorser",h?k:"",d,f,"endorse");g("endorsedate",h?l:"",d,f,"endorse")},g=function(b,e,f,g,h){return d.updateUserPreferences(b,e,f,g).then().always(function(){c.fetchNotifications()}).fail(function(b){c.exception(b);a("#"+h).prop("checked",!a("#"+h).prop("checked"))})},h=function(b,e,f){return d.updateSuspendedStatus(b,e,f).then().always(function(){c.fetchNotifications()}).fail(function(b){c.exception(b);a("#suspended").prop("checked",!a("#suspended").prop("checked"))})},i=function(b,f,g,h,i){var j=i.find(e.userprofilewrapper),k=j.data(b+"group");return d.updateGroup(k,f,g,h).then().always(function(){c.fetchNotifications()}).fail(function(d){c.exception(d);a("#"+b).prop("checked",!a("#"+b).prop("checked"))})},j=function(b,c,d,e,j){l(a("#"+d+"-region"));switch(d){case"endorse":f(b,c,e,j);break;case"availabilityoverride":g(d,e,b,c,d);break;case"suspend":h(e,b,c);break;case"onhold":case"keepactive":i(d,e,b,c,j);break;}m(a("#"+d+"-region"))},k=function(b){var c=b.find(e.userprofilewrapper),d=c.data("courseid"),f=c.data("userid");a("#endorse").click(function(){j(d,f,"endorse",this.checked,b)});a("#suspended").click(function(){j(d,f,"suspend",this.checked)});a("#onhold").click(function(){j(d,f,"onhold",this.checked,b)});a("#keepactive").click(function(){j(d,f,"keepactive",this.checked,b)});a("#availabilityoverride").click(function(){j(d,f,"availabilityoverride",this.checked,b)})},l=function(a){var b=a.find(e.containers.loadingIcon);b.removeClass("hidden")},m=function(a){var b=a.find(e.containers.loadingIcon);b.addClass("hidden")};return{init:function init(b){b=a(b);k(b)}}});
//# sourceMappingURL=user_profile.min.js.map

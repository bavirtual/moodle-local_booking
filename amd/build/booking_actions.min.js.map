{"version":3,"file":"booking_actions.min.js","sources":["../src/booking_actions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module handles session booking and logentry operations\n * including CRUD and UI events.\n *\n * @module     local_booking/booking_actions\n * @author     Mustafa Hajjar (mustafa.hajjar)\n * @copyright  BAVirtual.co.uk Â© 2024\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'local_booking/events',\n    'local_booking/selectors',\n],\nfunction(\n    $,\n    BookingEvents,\n    Selectors,\n) {\n\n    /**\n     * Redirect to exercise (assignment) grading page.\n     *\n     * @method  gotoFeedback\n     * @param   {object} root\n     * @param   {object} e\n     */\n     var gotoFeedback = (root, e) => {\n        let Source = root.find(Selectors.logentryitem),\n            courseId, exerciseId, userId;\n\n        // Call redirect to assignment feedback page\n        if (Source.length !== 0) {\n            // Get from logentry modal\n            courseId = Source.data('courseId');\n            exerciseId = Source.data('exerciseId');\n            userId = Source.data('userId');\n        } else {\n            // Get from closest dashboard session clicked\n            Source = $(e.target).closest(Selectors.regions.session);\n            courseId = $(Selectors.wrappers.bookingwrapper).data('courseid');\n            exerciseId = Source.data('exerciseId');\n            userId = Source.data('studentId');\n        }\n\n        // Trigger redirect to feedback\n        $('body').trigger(BookingEvents.gotoFeedback, [exerciseId]);\n\n        // Redirect to the grading and feedback page\n        location.href = M.cfg.wwwroot + '/local/booking/assign.php?courseid=' + courseId +\n                '&exeid=' + exerciseId + '&rownum=0&userid=' + userId + '&passed=1';\n    };\n\n    return {\n        gotoFeedback: gotoFeedback\n    };\n});\n"],"names":["define","$","BookingEvents","Selectors","gotoFeedback","root","e","courseId","exerciseId","userId","Source","find","logentryitem","length","data","target","closest","regions","session","wrappers","bookingwrapper","trigger","location","href","M","cfg","wwwroot"],"mappings":";;;;;;;;;AAwBAA,uCAAO,CACH,SACA,uBACA,4BAEJ,SACIC,EACAC,cACAC,iBAoCO,CACHC,aA3BgB,CAACC,KAAMC,SAEnBC,SAAUC,WAAYC,OADtBC,OAASL,KAAKM,KAAKR,UAAUS,cAIX,IAAlBF,OAAOG,QAEPN,SAAWG,OAAOI,KAAK,YACvBN,WAAaE,OAAOI,KAAK,cACzBL,OAASC,OAAOI,KAAK,YAGrBJ,OAAST,EAAEK,EAAES,QAAQC,QAAQb,UAAUc,QAAQC,SAC/CX,SAAWN,EAAEE,UAAUgB,SAASC,gBAAgBN,KAAK,YACrDN,WAAaE,OAAOI,KAAK,cACzBL,OAASC,OAAOI,KAAK,cAIzBb,EAAE,QAAQoB,QAAQnB,cAAcE,aAAc,CAACI,aAG/Cc,SAASC,KAAOC,EAAEC,IAAIC,QAAU,sCAAwCnB,SAChE,UAAYC,WAAa,oBAAsBC,OAAS"}